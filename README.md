# 1. 问题与思路
问题：大语言模型无法精准地对时间进行解析和计算  
但是，LLM擅长对文本的内容进行解析并提取出关键信息，且Python的`DateUtil`库可以精准地对时间进行计算，
因此考虑将问题分为两步：
1. 使用LLM提取出文本中与时间计算有关的关键词，拼接成特定格式的数据（如JSON），
2. 根据提取出的数据，由Python代码计算具体的时间

# 2. 解决方案
## 2.1 提取时间关键词
使用`langchain`构建提示词并对接GPT，以从用户输入的文本中提取出与时间有关的关键词  
例如，用户输入的文本为：“因参加专业技能提升课程，本学期第10周所有的思政课申请调至第12周”，
提取出的时间关键词应为：“本学期第10周”、“本学期第12周”

## 2.2 处理并计算时间
LLM提取出的与时间有关的关键词将转换成包含以下key-value的字典：
1. month: 表示距离当前月相隔几月，例如，1表示下个月，-1表示上个月
2. week: 表示距离本周相隔几周，例如，1表示下周。-1表示上周
3. weekday: 表示周几，1~7分别表示周一至周日
4. day: 表示距今天相隔几天，例如，1表示明天，2表示后天，-1表示昨天  
5. term: 表示是否要基于学期进行查询，1表示要，0表示不要  
所有字段对应的时间关键词若输入文本中未提及，就设为0  
例如，`下周一`表示为：
```json
{
  "month": 0,
  "week": 1,
  "weekday": 1,
  "day": 0,
  "term": 0
}
```
`本学期第一个月的第三个星期二`表示为：
```json
{
  "month": 1,
  "week": 3,
  "weekday": 2,
  "day": 0,
  "term": 1
}
```
提取出信息后，使用`python-dateutil`库提供的`relativedelta`计算目标日期:
```python
target_date = current_date + relativeda(months=month, weeks=week, weekday=weekday)
```
当基于学期进行计算时，`current_date`替换为事先指定好的学期开始时间
